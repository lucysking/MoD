"0","d5 <- "
"0","  d4 %>% "
"0","  group_by(id) %>% "
"0","  mutate("
"0","   # calculate the total number of people in participant's household"
"0","    ppl_in_home_total = sum("
"0","      c(ppl_in_home_adults, ppl_in_home_allchild),"
"0","      na.rm = TRUE"
"0","    ),"
"0","    # create a numeric version of income based on midpoint of bins"
"0","    income_numeric = case_when("
"0","      annual_income == ""Decline to answer"" ~ NA_real_,"
"0","      annual_income == ""No income"" ~ 0,"
"0","      annual_income == ""$10,000 or less"" ~ 10000,"
"0","      annual_income == ""$10,001 - $30,000"" ~ 20000,"
"0","      annual_income == ""$30,001 - $50,000"" ~ 40000,"
"0","      annual_income == ""$50,001 - $60,000"" ~ 55000,"
"0","      annual_income == ""$60,001 - $80,000"" ~ 70000,"
"0","      annual_income == ""$80,001- $100,000"" ~ 90000,"
"0","      annual_income == ""$100,001 - $150,000"" ~ 125000,"
"0","      annual_income == ""$150,001 - $200,000"" ~ 175000,"
"0","      annual_income == ""$200,001 - $250,000"" ~ 225000,"
"0","      annual_income == ""$250,001 or more"" ~ 250000,"
"0","    ),"
"0","    # inr based on the federal poverty thresholds for number of people in household and number that are children"
"0","    fpl_threshold = case_when("
"0","      ppl_in_home_total == 1 & ppl_in_home_allchild == 0 ~ 13300,"
"0","      ppl_in_home_total == 2 & ppl_in_home_allchild == 0 ~ 17120,"
"0","      ppl_in_home_total == 2 & ppl_in_home_allchild == 1 ~ 17622,"
"0","      ppl_in_home_total == 3 & ppl_in_home_allchild == 0 ~ 19998,"
"0","      ppl_in_home_total == 3 & ppl_in_home_allchild == 1 ~ 20578,"
"0","      ppl_in_home_total == 3 & ppl_in_home_allchild == 2 ~ 20598,"
"0","      ppl_in_home_total == 4 & ppl_in_home_allchild == 0 ~ 26370,"
"0","      ppl_in_home_total == 4 & ppl_in_home_allchild == 1 ~ 26801,"
"0","      ppl_in_home_total == 4 & ppl_in_home_allchild == 2 ~ 25926,"
"0","      ppl_in_home_total == 4 & ppl_in_home_allchild == 3 ~ 26017,"
"0","      ppl_in_home_total == 5 & ppl_in_home_allchild == 0 ~ 31800,"
"0","      ppl_in_home_total == 5 & ppl_in_home_allchild == 1 ~ 32263,"
"0","      ppl_in_home_total == 5 & ppl_in_home_allchild == 2 ~ 31275,"
"0","      ppl_in_home_total == 5 & ppl_in_home_allchild == 3 ~ 30510,"
"0","      ppl_in_home_total == 5 & ppl_in_home_allchild == 4 ~ 30044,"
"0","      ppl_in_home_total == 6 & ppl_in_home_allchild == 0 ~ 36576,"
"0","      ppl_in_home_total == 6 & ppl_in_home_allchild == 1 ~ 36721,"
"0","      ppl_in_home_total == 6 & ppl_in_home_allchild == 2 ~ 35965,"
"0","      ppl_in_home_total == 6 & ppl_in_home_allchild == 3 ~ 35239,"
"0","      ppl_in_home_total == 6 & ppl_in_home_allchild == 4 ~ 34161,"
"0","      ppl_in_home_total == 6 & ppl_in_home_allchild == 5 ~ 33522,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 0 ~ 42085,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 1 ~ 42348,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 2 ~ 41442,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 3 ~ 40811,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 4 ~ 39635,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 5 ~ 38262,"
"0","      ppl_in_home_total == 7 & ppl_in_home_allchild == 6 ~ 36757,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 0 ~ 47069,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 1 ~ 47485,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 2 ~ 46630,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 3 ~ 45881,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 4 ~ 44818,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 5 ~ 43470,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 6 ~ 42066,"
"0","      ppl_in_home_total == 8 & ppl_in_home_allchild == 7 ~ 41709,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 0 ~ 56621,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 1 ~ 56895,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 2 ~ 56139,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 3 ~ 55503,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 4 ~ 54460,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 5 ~ 53025,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 6 ~ 51727,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild == 7 ~ 51406,"
"0","      ppl_in_home_total >= 9 & ppl_in_home_allchild >= 8 ~ 49426"
"0","    ),"
"0","    inr_fpl = income_numeric / fpl_threshold"
"0","  ) %>% "
"0","  ungroup() "
