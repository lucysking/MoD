"0","# create a data frame of just the events and severity ratings that could have during pregnancy"
"0","a_p <-"
"0","  a %>% "
"0","  select(id, all_of(preg_types), all_of(sev_preg))"
"0",""
"0","# select names of of events that could have occurred during pregnancy"
"0","a_p_names <- "
"0","  a_p %>% "
"0","  select(preg_types) %>% "
"0","  rename_all("
"0","    ~str_replace(., ""_preg"", """")"
"0","  ) %>% "
"0","  names()"
"0",""
"0","# use map to multiply event columns by severity columns that match the prefix value (i.e., the event type); if event did not happen during pregnancy, product will be 0 "
"0","# then name these new product columns and add to the data frame "
"0","a_p <- "
"0","  a_p_names %>% "
"0","  map("
"0","    ~a_p %>% "
"0","      select(matches(.x)) %>%"
"0","      reduce(`*`)) %>%"
"0","  set_names("
"0","    paste0(a_p_names, ""_preg_sev"")"
"0","  ) %>% "
"0","  bind_cols(a_p, .) "
