"0","# create a data frame of just the events and severity ratings that could have occurred since child's birth"
"0","a_sc <-"
"0","  a %>% "
"0","  select(id, all_of(since_child_types), all_of(parent_sev_since_child))"
"0",""
"0","# select names of of events that could have occurred since child's birth"
"0","a_sc_names <- "
"0","  a_sc %>% "
"0","  select(since_child_types) %>% "
"0","  rename_all("
"0","    ~str_replace(., ""_since_child"", """")"
"0","  ) %>% "
"0","  names()"
"0",""
"0","# use map to multiply event columns by severity columns that match the prefix value (i.e., the event type); if event did not happen since child's birth, product will be 0 "
"0","# then name these new product columns and add to the data frame "
"0","a_sc <- "
"0","  a_sc_names %>% "
"0","  map("
"0","    ~a_sc %>% "
"0","      select(matches(.x)) %>%"
"0","      reduce(`*`)) %>%"
"0","  set_names("
"0","    paste0(a_sc_names, ""since_child_sev"")"
"0","  ) %>% "
"0","  bind_cols(a_sc, .) "
"0",""
